<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
          integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="container">
    <div class="row">
        <div class="col-lg-12 text-center">TODO LIST</div>
    </div>

    <div class="row">
        <div class="col-lg-3"></div>
        <div class="col-lg-6"><input type="text" placeholder="Enter new task" id="newTaskTextBox"></div>
        <div class="col-lg-3"><span class="glyphicon glyphicon-plus text-success" id="addButton"></span></div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script>
    $(function () {
        let model = [
            `buy groceries`,
            `pay kids to pick up dog poop`,
            `use id on the plus sign`
        ];

        //populate the view with data using the model
        model.forEach(task => addNewTask(task));

        function addRemoveHandler() {
            $('.glyphicon-remove').click(function () {
                $(this).closest(".row.task").remove();
                $textElement.focus();
            });
        }

        function getRowHtml(text) {
            return `<div class="row task">
                <div class="col-lg-3 text-right"><input type="checkbox"></div>
                <div class="col-lg-6">${text}</div>
                <div class="col-lg-3"><span class="glyphicon glyphicon-remove text-danger"></span></div>
                </div>`;
        }

        function addNewTask(taskName) {
            let html = getRowHtml(taskName);
            $(".row:last").before(html);
        }

        let $textElement = $("#newTaskTextBox");
        $textElement.focus();

        $("#addButton").click(function () {
            let text = $textElement.val();
            addNewTask(text);

            $textElement.val("");
            $textElement.focus();
            addRemoveHandler();//add the handler again because new tasks don't have the click handler to remove them
        });

        addRemoveHandler();
    });
</script>
</body>
</html>